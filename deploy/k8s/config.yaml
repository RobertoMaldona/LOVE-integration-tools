apiVersion: v1
kind: ConfigMap
metadata:
  name: nginx-conf
data:
  nginx.conf: |
    server {
      listen 80;
      server_name localhost;
      location / {
        root   /usr/src/frontend/love-frontend;
        try_files $uri$args $uri$args/ $uri/ /index.html;
      }
      location /manager {
          proxy_pass http://manager-service:8000;
          proxy_http_version 1.1;
          proxy_set_header Upgrade $http_upgrade;
          proxy_set_header Connection "upgrade";
          proxy_set_header Host $host;
          proxy_redirect off;
      }
      location /manager/static {
        alias /usr/src/manager/love-manager/static;
      }
      location /manager/media {
        alias /usr/src/manager/love-manager/media;
      }
    }
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: love-manager-env
data:
  MANAGER_SECRET_KEY: "tbder3gzppu)kl%(u3awhhg^^zuj&!ceh@$n&v0d38sjx43s8."
  REDIS_HOST: "redis"
  PROCESS_CONNECTION_PASS: "my_dev_password"
  REDIS_PASS: "admin123"
  ADMIN_USER_PASS: "test"
  USER_USER_PASS: "test"
  CMD_USER_PASS: "test"
  SERVER_URL: "*"
  LOVE_PRODUCER_WEBSOCKET_HOST: "love-nginx/manager/ws/subscription"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: love-manager-db-env
data:
  DB_ENGINE: "postgresql"
  DB_NAME: "postgres"
  DB_USER: "postgres"
  DB_HOST: "manager-database-service"
  DB_PORT: "5432"
  DB_PASS: "postgres"